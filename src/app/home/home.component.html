<!--
  ~ Copyright (c) 2016 VMware, Inc. All Rights Reserved.
  ~ This software is released under MIT license.
  ~ The full license information can be found in LICENSE in the root directory of this project.
  -->
<p>Welcome to PG analyser!</p>
<br>


<form #optionForm="ngForm">
    <div class="form-block">
     <section class="form-block">

        <div class="form-group">
            <label>Choose options what you want to analyze:</label>
            <!--<div class="form-group">-->
            <div>

                <clr-dropdown name="clr-dropdown-tables"  >
                    <button clrDropdownTrigger class="btn">
                        {{currentTableName}}
                        <clr-icon shape="caret down"></clr-icon>
                    </button>
                    <clr-dropdown-menu>
                        <a *ngFor="let tableName of tableNames" (click)="selectTable(tableName)" clrDropdownItem>{{tableName}}</a>
                    </clr-dropdown-menu>
                </clr-dropdown>

            </div>
            <br>
            <div class="checkbox">
                <input type="checkbox" name="checkbox1" id="check_columns_added" [(ngModel)]="model.columns_added"
                       name="columns_added" checked>
                <label for="check_columns_added">Table schema changed</label>
            </div>
            <div class="checkbox">
                <input type="checkbox" name="checkbox2" id="check_rows_updated"  [(ngModel)]="model.rows_updated"
                       name="rows_updated" checked>
                <label for="check_rows_updated">Rows been updated</label>
            </div>
            <!--div class="checkbox">
                <input type="checkbox" name="checkbox3" id="check_schema_version" [(ngModel)]="model.schema_version"
                       name="schema_version" checked >
                <label for="check_schema_version">Column type changed</label>
            </div-->

        </div>

        <button type="submit" class="btn btn-success" disabled="{{gatherDataIsDisabled ? true : undefined}}" id="runButton" (click)="gatherData()">Gather Data</button>
        <button class="btn btn-primary" disabled="{{analyzeIsDisabled ? true : undefined}}" id="analyzeButton" (click)="analyze()">Analyze</button>
        <button class="btn btn-primary" id="clearButton" (click)="clear()">Clear</button>

    <!--</section>-->
    <!--<section class="form-block">-->

        <br>
         <div *ngIf="isResultsAndErrosAreHidden == false">
             <div align="left">
                 <div *ngIf="errors.length == 0">
                    <!-- Show results if there is no errors -->
                    <h4><div *ngFor='let result of results' class='is-info' align="top"> {{result}} </div></h4>

                     <div *ngIf="columnSchemaChanges.length != 0">
                         <b>Analysis {{analysisId}} results</b>
                         <p>{{currentTableName}} column schema changes</p>
                         <clr-datagrid>
                             <clr-dg-column>Name</clr-dg-column>
                             <clr-dg-column>Action</clr-dg-column>
                             <clr-dg-column>Old Type</clr-dg-column>
                             <clr-dg-column>New Type</clr-dg-column>

                             <clr-dg-row *ngFor="let columnChange of columnSchemaChanges">
                                 <clr-dg-cell>{{columnChange.name}}</clr-dg-cell>
                                 <clr-dg-cell>{{columnChange.action}}</clr-dg-cell>
                                 <clr-dg-cell>{{columnChange.oldType}}</clr-dg-cell>
                                 <clr-dg-cell>{{columnChange.newType}}</clr-dg-cell>
                             </clr-dg-row>

                             <clr-dg-footer>{{columnSchemaChanges.length}} columnSchemaChange</clr-dg-footer>
                         </clr-datagrid>
                     </div>

                 </div>
                 <div *ngFor='let error of errors' class="is-error"> {{error}} </div>
             </div>


         </div>
         <br>

    </section>
    </div>

 </form>
